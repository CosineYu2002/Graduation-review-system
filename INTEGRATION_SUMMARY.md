# å‰å¾Œç«¯é€£æ¥é…ç½®ç¸½çµ

## âœ… å·²å®Œæˆçš„é…ç½®

### 1. å¾Œç«¯é…ç½® (`backend/api/main.py`)

æ·»åŠ äº† CORS ä¸­é–“ä»¶ï¼Œå…è¨±å‰ç«¯è¨ªå•ï¼š

```python
from fastapi.middleware.cors import CORSMiddleware

app.add_middleware(
    CORSMiddleware,
    allow_origins=[
        "http://localhost:9000",
        "http://127.0.0.1:9000",
        "http://localhost:8080",
        "http://127.0.0.1:8080",
    ],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

### 2. å‰ç«¯ Axios é…ç½® (`frontend/src/boot/axios.js`)

é…ç½®äº†é–‹ç™¼å’Œç”Ÿç”¢ç’°å¢ƒçš„ API URLï¼š

```javascript
const api = axios.create({ 
  baseURL: process.env.DEV ? '/api' : (process.env.API_URL || 'http://127.0.0.1:8000'),
  timeout: 30000,
})
```

### 3. Quasar é–‹ç™¼æœå‹™å™¨é…ç½® (`frontend/quasar.config.js`)

æ·»åŠ äº† proxy ä»£ç†å’Œå¿…è¦çš„æ’ä»¶ï¼š

```javascript
devServer: {
  proxy: {
    '/api': {
      target: 'http://127.0.0.1:8000',
      changeOrigin: true,
      rewrite: (path) => path.replace(/^\/api/, ''),
    },
  },
}

framework: {
  plugins: ['Notify', 'Dialog'],
}
```

### 4. å‰ç«¯å­¸ç”Ÿé é¢ (`frontend/src/pages/StudentsPage.vue`)

å·²å¯¦ç¾çš„ API å°æ¥ï¼š

- âœ… `GET /students/` - è¼‰å…¥å­¸ç”Ÿåˆ—è¡¨
- âœ… `GET /students/{id}` - æŸ¥çœ‹å­¸ç”Ÿè©³ç´°è³‡æ–™
- âœ… `POST /students/upload-excel` - ä¸Šå‚³ Excel æª”æ¡ˆ
- âœ… `DELETE /students/{id}` - åˆªé™¤å­¸ç”Ÿè³‡æ–™

### 5. å¾Œç«¯ API ç«¯é» (`backend/api/routers/students.py`)

å·²å¯¦ç¾çš„åŠŸèƒ½ï¼š

- âœ… å–å¾—æ‰€æœ‰å­¸ç”ŸåŸºæœ¬è³‡è¨Š
- âœ… å–å¾—ç‰¹å®šå­¸ç”Ÿè©³ç´°è³‡è¨Šï¼ˆåŒ…å«ä¿®èª²åˆ—è¡¨ï¼‰
- âœ… ä¸Šå‚³ Excel æ‰¹é‡æ–°å¢å­¸ç”Ÿ
- âœ… åˆªé™¤ç‰¹å®šå­¸ç”Ÿ
- âœ… åˆªé™¤æ‰€æœ‰å­¸ç”Ÿ

## ğŸš€ å•Ÿå‹•æ­¥é©Ÿ

### çµ‚ç«¯ 1 - å•Ÿå‹•å¾Œç«¯

```bash
cd backend
python run.py --reload
```

### çµ‚ç«¯ 2 - å•Ÿå‹•å‰ç«¯

```bash
cd frontend
quasar dev
```

## ğŸ§ª æ¸¬è©¦æµç¨‹

1. **è¨ªå•æ‡‰ç”¨**
   - å‰ç«¯ï¼š`http://localhost:9000`
   - å¾Œç«¯ API æ–‡æª”ï¼š`http://127.0.0.1:8000/docs`

2. **æ¸¬è©¦å­¸ç”Ÿè³‡æ–™é é¢**
   - é»æ“Šå´é‚Šæ¬„ã€Œå­¸ç”Ÿè³‡æ–™ã€
   - æ‡‰è©²çœ‹åˆ°ç©ºçš„å­¸ç”Ÿåˆ—è¡¨

3. **ä¸Šå‚³ Excel æ¸¬è©¦**
   - é»æ“Šã€Œä¸Šå‚³ Excelã€æŒ‰éˆ•
   - é¸æ“‡ Excel æª”æ¡ˆ
   - è¼¸å…¥ä¸»ä¿®ç§‘ç³»ä»£è™Ÿï¼ˆä¾‹å¦‚ï¼šE2ï¼‰
   - é»æ“Šä¸Šå‚³
   - æ‡‰è©²çœ‹åˆ°æˆåŠŸé€šçŸ¥ä¸¦é‡æ–°è¼‰å…¥å­¸ç”Ÿåˆ—è¡¨

4. **æŸ¥çœ‹å­¸ç”Ÿè©³ç´°è³‡æ–™**
   - é»æ“Šå­¸ç”Ÿåˆ—è¡¨ä¸­çš„ã€Œçœ¼ç›ã€åœ–æ¨™
   - æ‡‰è©²å½ˆå‡ºå°è©±æ¡†é¡¯ç¤ºå­¸ç”Ÿçš„åŸºæœ¬è³‡è¨Šå’Œä¿®èª²è¨˜éŒ„

5. **åˆªé™¤å­¸ç”Ÿæ¸¬è©¦**
   - é»æ“Šå­¸ç”Ÿåˆ—è¡¨ä¸­çš„ã€Œåƒåœ¾æ¡¶ã€åœ–æ¨™
   - ç¢ºèªåˆªé™¤
   - æ‡‰è©²çœ‹åˆ°æˆåŠŸé€šçŸ¥ä¸¦é‡æ–°è¼‰å…¥å­¸ç”Ÿåˆ—è¡¨

## ğŸ“Š API è³‡æ–™æµ

```
å‰ç«¯è«‹æ±‚æµç¨‹ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ StudentsPage â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ api.get('/students/')
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Axios      â”‚ (baseURL: /api æˆ– http://127.0.0.1:8000)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“ (é–‹ç™¼ç’°å¢ƒé€šé Vite proxy)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend API  â”‚ GET http://127.0.0.1:8000/students/
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ StudentCRUD  â”‚ è®€å– data/students/*.json
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Response   â”‚ { success: true, data: [...] }
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ API éŸ¿æ‡‰æ ¼å¼

æ‰€æœ‰ API éƒ½éµå¾ªçµ±ä¸€çš„éŸ¿æ‡‰æ ¼å¼ï¼š

```typescript
interface APIResponse<T> {
  success: boolean
  message: string
  data: T
}
```

**æˆåŠŸéŸ¿æ‡‰ç¯„ä¾‹ï¼š**
```json
{
  "success": true,
  "message": "æˆåŠŸå–å¾— 3 ä½å­¸ç”Ÿçš„åŸºæœ¬è³‡è¨Š",
  "data": [...]
}
```

**éŒ¯èª¤éŸ¿æ‡‰ç¯„ä¾‹ï¼š**
```json
{
  "detail": "ç²å–å­¸ç”Ÿåˆ—è¡¨å¤±æ•—: éŒ¯èª¤è¨Šæ¯"
}
```

## ğŸ” é™¤éŒ¯å»ºè­°

### æª¢æŸ¥å¾Œç«¯æ˜¯å¦é‹è¡Œ
```bash
curl http://127.0.0.1:8000/health
# æ‡‰è¿”å›ï¼š{"status":"healthy"}
```

### æª¢æŸ¥å­¸ç”Ÿåˆ—è¡¨ API
```bash
curl http://127.0.0.1:8000/students/
# æ‡‰è¿”å›ï¼š{"success":true,"message":"...","data":[...]}
```

### æª¢æŸ¥å‰ç«¯ Network è«‹æ±‚
1. æ‰“é–‹ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·ï¼ˆF12ï¼‰
2. åˆ‡æ›åˆ° Network æ¨™ç±¤
3. é‡æ–°è¼‰å…¥å­¸ç”Ÿè³‡æ–™é é¢
4. æŸ¥çœ‹è«‹æ±‚ï¼š
   - Request URL æ‡‰è©²æ˜¯ `/api/students/`ï¼ˆé–‹ç™¼ç’°å¢ƒï¼‰
   - Status æ‡‰è©²æ˜¯ 200
   - Response æ‡‰è©²åŒ…å« JSON è³‡æ–™

## ğŸ“ ä¸‹ä¸€æ­¥

å‰å¾Œç«¯é€£æ¥å·²å®Œæˆï¼Œå¯ä»¥ç¹¼çºŒé–‹ç™¼ï¼š

1. âœ… å­¸ç”Ÿè³‡æ–™é é¢å·²å®Œæˆ
2. â³ è¦å‰‡è³‡æ–™é é¢ï¼ˆå¾…é–‹ç™¼ï¼‰
3. â³ é–‹å§‹å¯©æŸ¥é é¢ï¼ˆå¾…é–‹ç™¼ï¼‰
4. â³ å¯©æŸ¥çµæœé é¢ï¼ˆå¾…é–‹ç™¼ï¼‰

## ğŸ“š ç›¸é—œæ–‡ä»¶

- `CONNECTION_GUIDE.md` - å®Œæ•´çš„é€£æ¥æŒ‡å—
- `backend/README_API.md` - å¾Œç«¯ API è©³ç´°æ–‡æª”
- `.github/copilot-instructions.md` - AI å”ä½œæŒ‡å—
