# 🧪 快速測試指南

## 啟動系統

### 方法 1：使用啟動腳本（推薦）

```bash
./start-dev.sh
```

### 方法 2：手動啟動

**終端 1 - 後端：**
```bash
cd backend
python run.py --reload
```

**終端 2 - 前端：**
```bash
cd frontend
quasar dev
```

## 測試步驟

### 1. 驗證連接 ✅

訪問以下 URL 確認服務正常：

- 前端應用：http://localhost:9000
- 後端健康檢查：http://127.0.0.1:8000/health
- 後端 API 文檔：http://127.0.0.1:8000/docs

**預期結果：**
- ✅ 前端應用正常顯示
- ✅ 健康檢查返回 `{"status":"healthy"}`
- ✅ API 文檔頁面可以打開

### 2. 測試學生資料頁面 📚

1. 在前端應用中，點擊側邊欄的「學生資料」
2. 應該看到學生列表（初次可能為空）

**預期結果：**
- ✅ 頁面正常載入
- ✅ 顯示「學生資料管理」標題
- ✅ 有「上傳 Excel」按鈕
- ✅ 有搜尋框

### 3. 測試 API 端點 🔌

使用瀏覽器或 curl 測試：

```bash
# 測試取得學生列表
curl http://127.0.0.1:8000/students/

# 預期返回
# {"success":true,"message":"成功取得 0 位學生的基本資訊","data":[]}
```

**使用 Swagger UI 測試：**
1. 訪問 http://127.0.0.1:8000/docs
2. 展開 `GET /students/` 端點
3. 點擊「Try it out」
4. 點擊「Execute」
5. 查看響應

**預期結果：**
- ✅ Status code: 200
- ✅ Response body 包含 `success: true`

### 4. 測試上傳功能 📤

#### 準備測試 Excel 檔案

創建一個 Excel 檔案（.xlsx 格式），包含以下欄位和測試資料：

| 學號 | 姓名 | 課程名稱 | 課程碼 | 學分數 | 成績 | 承抵課程別 | 選必修 | 學年 | 學期 |
|------|------|----------|--------|--------|------|-----------|--------|------|------|
| A1110001 | 張三 | 微積分（一） | E215611 | 3.0 | 85 | | 1 | 111 | 1 |
| A1110001 | 張三 | 計算機概論（一） | E216610 | 3.0 | 90 | | 1 | 111 | 1 |
| A1110002 | 李四 | 微積分（一） | E215611 | 3.0 | 999 | | 1 | 111 | 1 |

#### 執行上傳測試

1. 在前端應用的「學生資料」頁面
2. 點擊「上傳 Excel」按鈕
3. 在對話框中：
   - 選擇剛剛創建的 Excel 檔案
   - 輸入主修科系代號：`E2`（電機工程學系）
4. 點擊「上傳」按鈕

**預期結果：**
- ✅ 顯示綠色通知訊息：「成功從 Excel 檔案匯入 X 位學生資料」
- ✅ 對話框自動關閉
- ✅ 學生列表自動刷新
- ✅ 表格中顯示上傳的學生資料

### 5. 測試查看詳細資料 🔍

1. 在學生列表中，點擊任一學生的「眼睛」圖標
2. 應該彈出全螢幕對話框

**預期結果：**
- ✅ 顯示學生基本資訊（學號、姓名、主修科系、入學年度）
- ✅ 顯示修課記錄表格
- ✅ 成績狀態正確顯示（及格=綠色、修課中=藍色）
- ✅ 可以關閉對話框

### 6. 測試搜尋功能 🔎

1. 在搜尋框中輸入學號或姓名的部分字串
2. 例如輸入「A111」或「張」

**預期結果：**
- ✅ 列表即時過濾
- ✅ 只顯示符合搜尋條件的學生
- ✅ 點擊清除按鈕可以清空搜尋

### 7. 測試刪除功能 🗑️

1. 在學生列表中，點擊任一學生的「垃圾桶」圖標
2. 在確認對話框中點擊「OK」

**預期結果：**
- ✅ 顯示確認對話框
- ✅ 確認後顯示綠色通知訊息
- ✅ 學生從列表中移除
- ✅ 列表自動刷新

### 8. 檢查資料持久化 💾

1. 上傳一些學生資料
2. 關閉瀏覽器並重新打開
3. 再次訪問學生資料頁面

**預期結果：**
- ✅ 之前上傳的學生資料仍然存在
- ✅ 資料儲存在 `backend/data/students/` 目錄

**驗證檔案：**
```bash
ls backend/data/students/
# 應該看到 A1110001.json, A1110002.json 等檔案

cat backend/data/students/A1110001.json
# 應該看到完整的學生資料 JSON
```

## 🐛 常見問題排查

### 問題 1：前端無法連接後端

**症狀：**
- 網路錯誤訊息
- 學生列表一直顯示載入中

**檢查步驟：**
```bash
# 1. 確認後端運行中
curl http://127.0.0.1:8000/health

# 2. 檢查後端日誌
# 在後端終端中查看是否有錯誤訊息

# 3. 檢查瀏覽器控制台
# F12 -> Network -> 查看失敗的請求
```

### 問題 2：上傳 Excel 失敗

**可能原因：**
- Excel 格式不正確
- 缺少必要欄位
- 檔案過大（>10MB）

**解決方法：**
1. 確認檔案格式為 .xlsx
2. 檢查所有必要欄位都存在
3. 查看錯誤訊息的具體內容

### 問題 3：CORS 錯誤

**症狀：**
```
Access to XMLHttpRequest has been blocked by CORS policy
```

**解決方法：**
1. 確認 `backend/api/main.py` 中 CORS 設置正確
2. 確認前端 proxy 配置正確（`frontend/quasar.config.js`）
3. 重啟前後端服務器

### 問題 4：端口已被占用

**症狀：**
```
Address already in use
```

**解決方法：**
```bash
# 查找占用端口的進程（以 8000 為例）
lsof -i :8000

# 終止進程
kill -9 <PID>
```

## ✅ 測試檢查清單

- [ ] 後端健康檢查通過
- [ ] 前端應用正常顯示
- [ ] 學生資料頁面可以訪問
- [ ] API 文檔可以打開
- [ ] Excel 上傳成功
- [ ] 學生列表正確顯示
- [ ] 查看學生詳細資料功能正常
- [ ] 搜尋功能正常工作
- [ ] 刪除功能正常工作
- [ ] 資料持久化正常
- [ ] 瀏覽器控制台無錯誤訊息
- [ ] 後端終端無錯誤訊息

## 📊 測試資料

測試完成後，可以使用以下指令清理測試資料：

```bash
# 刪除所有學生資料
rm backend/data/students/*.json

# 或使用 API
curl -X DELETE http://127.0.0.1:8000/students/
```

## 🎉 成功標準

所有測試檢查清單項目都通過，則前後端連接配置成功！
